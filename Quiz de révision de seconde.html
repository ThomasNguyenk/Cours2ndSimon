<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QCM Physique-Chimie - Seconde</title>

<style>
/* Reset & Base */
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background: url('https://cdn-imgix.headout.com/media/images/e4a728601dae2c994a2a7bba52d35e74-harrypotterlondon-13.jpg') 
                no-repeat center center fixed;
    background-size: cover;
    min-height: 100vh;
    padding: 20px;
}

.container { max-width: 1000px; margin: 0 auto; }

/* Header */
header {
    text-align: center;
    padding: 30px 20px;
    margin-bottom: 30px;
    color: white;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    background: url('https://media3.giphy.com/media/OZCZRFgOx9nGxd0XQf/giphy.gif') 
                no-repeat center center;
    background-size: cover;
    border-radius: 10px;
}
h1 { font-size: 2.5rem; margin-bottom: 10px; }
.subtitle { font-size: 1.2rem; opacity: 0.9; }

/* Containers */
.quiz-container, .leaderboard-container {
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    overflow: hidden;
    margin-bottom: 30px;
}
.quiz-header, .leaderboard-header {
    background: #2c3e50;
    color: white;
    padding: 20px;
    text-align: center;
}
.quiz-body, .leaderboard-body { padding: 30px; }

/* Questions */
.question {
    margin-bottom: 30px;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    background: #f9f9f9;
    box-shadow: 0 3px 10px rgba(0,0,0,0.05);
}
.question-number { font-weight: bold; color: #2575fc; margin-bottom: 10px; }
.question-text { font-weight: bold; margin-bottom: 15px; color: #2c3e50; }
.options { display: flex; flex-direction: column; gap: 12px; }
.option { display: flex; align-items: center; gap: 12px; padding: 12px 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
.option:hover { background: #edf7fd; border-color: #3498db; }
.option input { cursor: pointer; transform: scale(1.2); }
.option label { cursor: pointer; width: 100%; }

/* Buttons */
.buttons { display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
.btn { padding: 12px 25px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; font-weight: 600; }
.submit-btn { background: #3498db; color: white; }
.submit-btn:hover { background: #2980b9; }
.reset-btn { background: #e74c3c; color: white; }
.reset-btn:hover { background: #c0392b; }
.save-score-btn { background: #27ae60; color: white; }
.save-score-btn:hover { background: #219653; }
.show-leaderboard-btn { background: #8e44ad; color: white; }
.show-leaderboard-btn:hover { background: #732d91; }

/* Results */
.results {
    margin-top: 40px;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    display: none;
    background: #f8f9fa;
    border: 1px solid #e0e0e0;
}
.score { font-size: 2rem; font-weight: bold; margin-bottom: 20px; }
.score-details { font-size: 1.2rem; margin-bottom: 25px; }
.message { font-size: 1.3rem; margin-bottom: 25px; padding: 15px; border-radius: 8px; }

/* Leaderboard */
.leaderboard-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
.leaderboard-table th, .leaderboard-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #e0e0e0; }
.leaderboard-table th { background-color: #f8f9fa; font-weight: bold; }

/* Footer */
footer {
    text-align: center;
    padding: 20px;
    color: white;
    font-size: 0.9rem;
    opacity: 0.8;
    border-radius: 10px;
    background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.8)), url('https://i.pinimg.com/236x/5a/d8/77/5ad8779ec60744d790880a7f398f34cf.jpg') no-repeat center center;
    background-size: cover;
}
</style>
</head>
<body>
<script>
document.addEventListener("DOMContentLoaded", () => {
    // V√©rification de l'acc√®s et de la classe
    const isConnected = localStorage.getItem("isLoggedIn") === "true";
    const studentClass = localStorage.getItem("studentClass");

    if (!isConnected) {
        alert("‚õî Vous devez √™tre connect√© pour acc√©der au quiz.");
        window.location.replace("Connexion √©tudiant.html");
        return;
    }
    
    // Si la classe est forc√©e √† Premi√®re, le quiz de Seconde est masqu√©.
    if (studentClass !== "Seconde" && studentClass !== "Premi√®re" && studentClass !== "Terminale") {
        alert("‚õî Acc√®s refus√©. Veuillez v√©rifier votre statut de connexion.");
        window.location.replace("index.html");
    }
});
</script>

<div class="container">
<header>
    <h1>QCM de Physique-Chimie</h1>
    <p class="subtitle">Niveau Seconde - Testez vos connaissances</p>
</header>

<div class="quiz-container" id="quiz-container">
    <div class="quiz-header">
        <h2>Questionnaire √† Choix Multiples</h2>
        <p>20 questions - Choisissez la bonne r√©ponse pour chaque question</p>
    </div>
    <div class="quiz-body">
        <div id="quiz"></div>
        <div class="buttons">
            <button class="btn submit-btn" onclick="checkAnswers()">Soumettre les r√©ponses</button>
            <button class="btn reset-btn" onclick="resetQuiz()">R√©initialiser</button>
        </div>
        <div class="results" id="results">
            <div class="score" id="score"></div>
            <div class="score-details" id="score-details"></div>
            
            <div class="save-score-container" id="save-score-container">
                <button class="btn save-score-btn" onclick="saveScore()">Enregistrer mon score</button>
            </div>
            
            <div class="buttons">
                <button class="btn show-leaderboard-btn" onclick="showLeaderboard()">Voir mon classement</button>
                <button class="btn reset-btn" onclick="resetQuiz()">Refaire le quiz</button>
            </div>
        </div>
    </div>
</div>

<div class="leaderboard-container" id="leaderboard-container" style="display:none;">
    <div class="leaderboard-header">
        <h2 id="leaderboard-title">Classement des Meilleurs Scores</h2>
    </div>
    <div class="leaderboard-body">
        <table class="leaderboard-table">
            <thead>
                <tr><th>Position</th><th>Nom</th><th>Score</th><th>Date & Heure</th><th>Commentaire</th></tr>
            </thead>
            <tbody id="leaderboard-body"></tbody>
        </table>
        <div class="buttons" style="justify-content:center; margin-top:20px;">
            <button class="btn reset-btn" onclick="hideLeaderboard()">Retour au quiz</button>
            <button class="btn reset-btn" onclick="clearLeaderboard()">Effacer mon classement</button>
        </div>
    </div>
</div>

<footer><p>&copy; 2025 Nguyen Thomas. Tous droits r√©serv√©s.</p></footer>
</div>



<script>
// --- CONFIGURATION PERSONNELLE ---
const CURRENT_USER = localStorage.getItem("currentUser") || "Guest";
const SCORE_STORAGE_KEY = `quizScores_${CURRENT_USER}_Seconde`; // Cl√© personnalis√©e par utilisateur et par niveau

// --- BANQUE DE QUESTIONS ---
const questionBank = [
    {
        question: "Quelle est l'unit√© de mesure de l'intensit√© du courant √©lectrique ?",
        options: ["Volt", "Amp√®re", "Ohm", "Watt"],
        correctAnswer: 1
    },
    {
        question: "Quel gaz est majoritairement responsable de l'effet de serre additionnel d√ª aux activit√©s humaines ?",
        options: ["Oxyg√®ne (O‚ÇÇ)", "Diazote (N‚ÇÇ)", "Dioxyde de carbone (CO‚ÇÇ)", "Hydrog√®ne (H‚ÇÇ)"],
        correctAnswer: 2
    },
    {
        question: "Quelle est la formule chimique de l'eau ?",
        options: ["CO‚ÇÇ", "H‚ÇÇO", "O‚ÇÇ", "NaCl"],
        correctAnswer: 1
    },
    {
        question: "Quel ph√©nom√®ne est principalement √† l'origine des mar√©es ?",
        options: ["La rotation de la Terre", "L'attraction gravitationnelle de la Lune", "Les courants marins", "La pression atmosph√©rique"],
        correctAnswer: 1
    },
    {
        question: "Quel est le pH d'une solution neutre √† 25¬∞C ?",
        options: ["0", "7", "10", "14"],
        correctAnswer: 1
    },
    {
        question: "Quelle est la particule charg√©e n√©gativement dans un atome ?",
        options: ["Proton", "Neutron", "√âlectron", "Nucl√©on"],
        correctAnswer: 2
    },
    {
        question: "Quel est le nom de la r√©action chimique lors de laquelle une substance s'unit avec l'oxyg√®ne ?",
        options: ["R√©duction", "Oxydation", "Combustion", "Neutralisation"],
        correctAnswer: 2
    },
    {
        question: "Quelle grandeur physique est mesur√©e en joules (J) ?",
        options: ["Puissance", "Intensit√©", "√ânergie", "Tension"],
        correctAnswer: 2
    },
    {
        question: "Quel est le nom de la force qui s'oppose au glissement de deux surfaces en contact ?",
        options: ["Force gravitationnelle", "Force √©lectromagn√©tique", "Force de frottement", "Force centrifuge"],
        correctAnswer: 2
    },
    {
        question: "Quel scientifique a formul√© la loi de la gravitation universelle ?",
        options: ["Albert Einstein", "Isaac Newton", "Galil√©e", "Stephen Hawking"],
        correctAnswer: 1
    },
    {
        question: "Quel √©l√©ment chimique a pour symbole 'Na' ?",
        options: ["Nickel", "N√©on", "Azote", "Sodium"],
        correctAnswer: 3
    },
    {
        question: "Quelle est la vitesse de la lumi√®re dans le vide ?",
        options: ["300 000 m/s", "3 000 000 m/s", "30 000 000 m/s", "300 000 000 m/s"],
        correctAnswer: 3
    },
    {
        question: "Quel type de transformation chimique produit de l'√©nergie thermique ?",
        options: ["R√©action endothermique", "R√©action exothermique", "R√©action enzymatique", "R√©action d'oxydor√©duction"],
        correctAnswer: 1
    },
    {
        question: "Quelle est la formule qui relie la vitesse, la distance et le temps ?",
        options: ["v = d √ó t", "v = d / t", "v = t / d", "d = v √ó t¬≤"],
        correctAnswer: 1
    },
    {
        question: "Quel gaz est n√©cessaire √† la respiration des √™tres vivants ?",
        options: ["Diazote", "Dioxyde de carbone", "Dioxyg√®ne", "Hydrog√®ne"],
        correctAnswer: 2
    },
    {
        question: "Quelle est la formule chimique du sel de table ?",
        options: ["H‚ÇÇO", "CO‚ÇÇ", "NaCl", "C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ"],
        correctAnswer: 2
    },
    {
        question: "Quel instrument utilise-t-on pour mesurer la masse d'un objet ?",
        options: ["Un dynamom√®tre", "Une balance", "Un voltm√®tre", "Un thermom√®tre"],
        correctAnswer: 1
    },
    {
        question: "Quel √©tat de la mati√®re a un volume fixe mais pas de forme fixe ?",
        options: ["Solide", "Liquide", "Gaz", "Plasma"],
        correctAnswer: 1
    },
    {
        question: "Quelle particule d√©termine l'identit√© d'un atome ?",
        options: ["Le neutron", "Le proton", "L'√©lectron", "Le quark"],
        correctAnswer: 1
    },
    {
        question: "Quel ph√©nom√®ne explique pourquoi un stylo plong√© dans l'eau semble cass√© ?",
        options: ["La r√©flexion", "La r√©fraction", "La diffraction", "L'interf√©rence"],
        correctAnswer: 1
    },
    {
        question: "Quelle est l'unit√© de mesure de la force dans le syst√®me international ?",
        options: ["Le joule", "Le watt", "Le newton", "Le pascal"],
        correctAnswer: 2
    },
    {
        question: "Quel gaz est produit lors de la photosynth√®se ?",
        options: ["Dioxyde de carbone", "Diazote", "Dioxyg√®ne", "Hydrog√®ne"],
        correctAnswer: 2
    },
    {
        question: "Quel est le principal gaz pr√©sent dans l'atmosph√®re terrestre ?",
        options: ["Dioxyg√®ne", "Dioxyde de carbone", "Diazote", "Argon"],
        correctAnswer: 2
    },
    {
        question: "Quel type d'√©nergie utilise une √©olienne ?",
        options: ["√ânergie hydraulique", "√ânergie solaire", "√ânergie √©olienne", "√ânergie g√©othermique"],
        correctAnswer: 2
    },
    {
        question: "Quel est le point d'√©bullition de l'eau √† pression atmosph√©rique normale ?",
        options: ["0¬∞C", "50¬∞C", "100¬∞C", "200¬∞C"],
        correctAnswer: 2
    },
    {
        question: "Quel m√©tal est liquide √† temp√©rature ambiante ?",
        options: ["Fer", "Cuivre", "Mercure", "Aluminium"],
        correctAnswer: 2
    },
    {
        question: "Quelle loi physique √©nonce que 'Tout corps plong√© dans un fluide subit une pouss√©e verticale √©gale au poids du volume de fluide d√©plac√©' ?",
        options: ["Loi de Newton", "Loi d'Ohm", "Principe d'Archim√®de", "Loi de Pascal"],
        correctAnswer: 2
    },
    {
        question: "Quelle est la couleur qui correspond √† la longueur d'onde la plus courte dans le spectre visible ?",
        options: ["Rouge", "Vert", "Bleu", "Jaune"],
        correctAnswer: 2
    },
    {
        question: "Quel acide trouve-t-on dans le vinaigre ?",
        options: ["Acide sulfurique", "Acide chlorhydrique", "Acide ac√©tique", "Acide citrique"],
        correctAnswer: 2
    },
    {
        question: "Quel ph√©nom√®ne permet aux oiseaux de voler ?",
        options: ["La pouss√©e d'Archim√®de", "L'effet Bernoulli", "La force centrifuge", "La conduction thermique"],
        correctAnswer: 1
    }
];

// Variables
let currentScore=0; let totalQuestions=20;

// S√©lection al√©atoire
function selectRandomQuestions(){
    const shuffled=[...questionBank];
    for(let i=shuffled.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]];
    }
    return shuffled.slice(0,20);
}

// G√©n√©ration du quiz
function generateQuiz(){
    const quizContainer=document.getElementById("quiz");
    quizContainer.innerHTML="";
    const selected=selectRandomQuestions();
    window.correctAnswers={};
    selected.forEach((q,index)=>{
        const qNum=index+1;
        window.correctAnswers[`q${qNum}`]=q.correctAnswer;
        quizContainer.innerHTML+=`
            <div class="question">
                <div class="question-number">Question ${qNum}/20</div>
                <div class="question-text">${q.question}</div>
                <div class="options">
                    ${q.options.map((opt,i)=>`
                        <label class="option">
                            <input type="radio" name="q${qNum}" value="${i}">${String.fromCharCode(97+i)}) ${opt}
                        </label>`).join("")}
                </div>
            </div>`; // <div class="explanation"> est retir√©
    });
}

// V√©rification des r√©ponses
function checkAnswers(){
    let score=0;
    totalQuestions=Object.keys(window.correctAnswers).length;
    for(let i=1;i<=totalQuestions;i++){
        const questionName="q"+i;
        const selected=document.querySelector(`input[name=${questionName}]:checked`);
        const questionElement=document.querySelectorAll(".question")[i-1];
        questionElement.classList.remove("correct","incorrect");
        if(selected){
            if(parseInt(selected.value)===window.correctAnswers[questionName]){score++;questionElement.classList.add("correct");}
            else{questionElement.classList.add("incorrect");}
        }
        // Pas d'affichage des explications (conform√©ment √† la demande pr√©c√©dente)
    }
    currentScore=score;
    document.getElementById("score").textContent=`Score: ${score}/${totalQuestions}`;
    document.getElementById("score-details").textContent=`Vous avez r√©pondu correctement √† ${score} questions sur ${totalQuestions}.`;
    document.getElementById("save-score-container").style.display="block";
    document.getElementById("results").style.display="block";
}

// Sauvegarde du score (PERSONNELLE)
function saveScore(){
    const playerName = CURRENT_USER; // Nom d'utilisateur connect√©
    
    if(playerName === "Guest" || !localStorage.getItem("isLoggedIn")){
        alert("Erreur: Vous devez √™tre connect√© pour enregistrer votre score.");
        document.getElementById("save-score-container").style.display="none";
        return;
    }

    // R√©cup√©ration des scores personnels
    const scores = JSON.parse(localStorage.getItem(SCORE_STORAGE_KEY)) || [];
    
    scores.push({
        name: playerName,
        score: currentScore,
        total: totalQuestions,
        date: new Date().toLocaleDateString("fr-FR"),
        time: new Date().toLocaleTimeString("fr-FR", { hour: '2-digit', minute: '2-digit' }) // Ajout de l'heure
    });
    
    // Tri des scores par pourcentage d√©croissant (meilleur score en premier)
    scores.sort((a, b) => ((b.score / b.total) - (a.score / a.total)));
    
    // Sauvegarde des 10 meilleurs scores personnels
    localStorage.setItem(SCORE_STORAGE_KEY, JSON.stringify(scores.slice(0, 10)));
    
    alert(`Score enregistr√© avec succ√®s pour ${playerName}!`);
    document.getElementById("save-score-container").style.display="none";
}

// Commentaire
function getComment(score,total){
    const pct=(score/total)*100;
    if(pct>=90) return "Excellent ! üåü";
    if(pct>=70) return "Bien jou√© üôÇ";
    if(pct>=50) return "Peut mieux faire üòê";
    return "√Ä revoir üî¥";
}

// Classement (PERSONNEL)
function showLeaderboard(){
    const leaderboard=document.getElementById("leaderboard-container");
    const body=document.getElementById("leaderboard-body");
    
    // R√©cup√©ration des scores personnels
    const scores = JSON.parse(localStorage.getItem(SCORE_STORAGE_KEY)) || [];
    
    // Mise √† jour du titre
    document.getElementById("leaderboard-title").textContent = `Mon Classement Personnel (Joueur : ${CURRENT_USER})`;

    body.innerHTML="";
    if(scores.length===0){
        body.innerHTML='<tr><td colspan="5" style="text-align:center;">Aucun score personnel enregistr√©.</td></tr>';
    } else {
        scores.forEach((s,i)=>{
            const pct=((s.score/s.total)*100).toFixed(1);
            const comment=getComment(s.score,s.total);
            // On affiche le nom et le score
            body.innerHTML+=`<tr><td>${i+1}</td><td>${s.name}</td><td>${s.score}/${s.total} (${pct}%)</td><td>${s.date} √† ${s.time}</td><td>${comment}</td></tr>`;
        });
    }
    document.getElementById("quiz-container").style.display="none";
    leaderboard.style.display="block";
}

function hideLeaderboard(){document.getElementById("leaderboard-container").style.display="none";document.getElementById("quiz-container").style.display="block";}

// Effacement du classement (PERSONNEL)
function clearLeaderboard(){ 
    if(confirm("Voulez-vous vraiment effacer tout VOTRE classement personnel ?")){
        localStorage.removeItem(SCORE_STORAGE_KEY);
        document.getElementById("leaderboard-body").innerHTML='<tr><td colspan="5" style="text-align:center;">Aucun score personnel enregistr√©.</td></tr>';
        alert("Votre classement personnel a √©t√© effac√©.");
    } 
}

function resetQuiz(){
    document.getElementById("quiz").innerHTML="";
    generateQuiz();
    // document.querySelectorAll(".explanation").forEach(e=>e.style.display="none"); // Pas n√©cessaire, car plus d'explications
    document.getElementById("results").style.display="none";
    document.getElementById("save-score-container").style.display="none";
}

// Initialisation
window.onload=generateQuiz;
</script>
</body>
</html>